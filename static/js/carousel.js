// Generated by CoffeeScript 1.3.1
(function() {
  var interval, moveTo, next, opacity, prev, resetCarousel, slide, sliding, startCarousel;

  interval = 200;

  opacity = .5;

  sliding = false;

  slide = function(pixels) {
    var curr, inner, left;
    inner = $('.carousel-inner')[0];
    curr = inner.style.left;
    curr = parseInt(curr.replace(/px/, ''));
    left = (curr + pixels).toString() + 'px';
    sliding = true;
    return $(inner).animate({
      'left': left
    }, interval, function() {
      return sliding = false;
    });
  };

  moveTo = function(sibling) {
    var pixels;
    if (!$('.carousel-inner .active')[sibling]().length) {
      return;
    }
    if (sliding) {
      return;
    }
    $('.carousel-inner .active').fadeTo(interval, opacity, function() {
      return $(this).css({
        'opacity': ''
      });
    });
    $('.carousel-inner .active')[sibling]().fadeTo(interval, 1, function() {
      return $(this).css({
        'opacity': ''
      });
    });
    $('.carousel-inner .active')[sibling]().addClass(sibling);
    $('.carousel-inner .active').removeClass('active');
    $('.carousel-inner .' + sibling).addClass('active');
    $('.carousel-inner .active').removeClass(sibling);
    resetCarousel();
    pixels = sibling === 'prev' ? 650 : -650;
    return slide(pixels);
  };

  prev = function() {
    return moveTo('prev');
  };

  next = function() {
    return moveTo('next');
  };

  resetCarousel = function() {
    $('.carousel-inner .active').unbind();
    $('.carousel-inner .active').next().unbind();
    $('.carousel-inner .active').prev().unbind();
    $('.carousel-inner .active').next().click(next);
    return $('.carousel-inner .active').prev().click(prev);
  };

  startCarousel = function() {
    $('.landing').hide();
    $('.carousel').show();
    resetCarousel();
    return $(document).keydown(function(e) {
      if (e.keyCode === 37) {
        moveTo('prev');
        return false;
      } else if (e.keyCode === 39) {
        moveTo('next');
        return false;
      }
    });
  };

  $(document).ready(function() {
    return $('.landing .arrow').click(function() {
      return startCarousel();
    });
  });

}).call(this);
