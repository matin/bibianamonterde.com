// Generated by CoffeeScript 1.3.1
(function() {
  var doubleKeypress, interval, lastSlide, moveTo, next, opacity, prev, resetCarousel, slide, startCarousel;

  interval = 200;

  lastSlide = 0;

  opacity = .5;

  slide = function(pixels) {
    var curr, inner, left;
    inner = $('.carousel-inner')[0];
    curr = inner.style.left;
    curr = parseInt(curr.replace(/px/, ''));
    left = (curr + pixels).toString() + 'px';
    return $(inner).animate({
      'left': left
    }, interval);
  };

  doubleKeypress = function() {
    var now;
    now = new Date();
    if (now - lastSlide <= interval) {
      return true;
    } else {
      lastSlide = now;
      return false;
    }
  };

  moveTo = function(sibling) {
    var pixels;
    if (!$('.carousel-inner .active')[sibling]().length) {
      return;
    }
    if (doubleKeypress()) {
      return;
    }
    $('.carousel-inner .active').fadeTo(interval, opacity);
    $('.carousel-inner .active')[sibling]().fadeTo(interval, 1);
    $('.carousel-inner .active')[sibling]().addClass(sibling);
    $('.carousel-inner .active').removeClass('active');
    $('.carousel-inner .' + sibling).addClass('active');
    $('.carousel-inner .active').removeClass(sibling);
    resetCarousel();
    pixels = sibling === 'prev' ? 650 : -650;
    return slide(pixels);
  };

  prev = function() {
    return moveTo('prev');
  };

  next = function() {
    return moveTo('next');
  };

  resetCarousel = function() {
    $('.carousel-inner .active').unbind();
    $('.carousel-inner .active').next().unbind();
    $('.carousel-inner .active').prev().unbind();
    $('.carousel-inner .active').next().click(next);
    $('.carousel-inner .active').prev().click(prev);
    $('.carousel-inner .active').next().hover(function() {
      return $(this).fadeTo(50, 1);
    }, function() {
      return $(this).fadeTo(50, opacity);
    });
    return $('.carousel-inner .active').prev().hover(function() {
      return $(this).fadeTo(50, 1);
    }, function() {
      return $(this).fadeTo(50, opacity);
    });
  };

  startCarousel = function() {
    $('.landing').hide();
    $('.carousel').show();
    resetCarousel();
    return $(document).keydown(function(e) {
      if (e.keyCode === 37) {
        moveTo('prev');
        return false;
      } else if (e.keyCode === 39) {
        moveTo('next');
        return false;
      }
    });
  };

  $(document).ready(function() {
    return $('.landing a.arrow').click(function() {
      return startCarousel();
    });
  });

}).call(this);
